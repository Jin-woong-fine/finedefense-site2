<!DOCTYPE html>
<html lang="ko">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="화인디펜스, 임시 홈페이지, 테스트 홈페이지">

      <title>화인디펜스</title>

      <link rel="stylesheet" href="style.css">
      <link rel="stylesheet" href="features.css">
      <link rel="stylesheet" href="banner.css">
  </head>

  <body>
    <header class="header-inner">
      <div class="header-left">
        <a href="#"><img src="img/logo_transparent_finedefense.png" alt="로고" class="logo"></a>
        <ul class="main-menu">
          <li>
            <a href="#">회사소개</a>
              <ul class="submenu">
                <li><a href="#">기업개요</a></li>
                <li><a href="#">CEO인사말</a></li>
                <li><a href="#">연혁</a></li>
                <li><a href="#">기업이념 및 비전</a></li>
                <li><a href="#">조직도</a></li>
                <li><a href="#">찾아오시는길</a></li>
            </ul>
          </li>

          <li>
            <a href="#">제품소개</a>
              <ul class="submenu">
              <li><a href="#">수중이동형케이블</a></li>
              <li><a href="#">수중고정형케이블</a></li>
              <li><a href="#">수중커넥터</a></li>
              <li><a href="#">EPD케이블</a></li>
              <li><a href="#">커스텀케이블</a></li>
            </ul>
          </li>

          <li>
            <a href="#">홍보센터</a>
              <ul class="submenu">
                <li><a href="#">뉴스룸</a></li>
                <li><a href="#">갤러리</a></li>
                <li><a href="#">홍보영상</a></li>
                <li><a href="#">카탈로그</a></li>
              </ul>
          </li>

          <li>
            <a href="#">고객지원</a>
              <ul class="submenu">
                <li><a href="#">1:1 문의</a></li>
                <li><a href="#">다운로드 센터</a></li>
              </ul>
          </li>

        </ul>
      </div>

      <div class="header-right">
        <div class="language">
          <a href="#" class="lang-btn">Language ▼</a>
          <ul class="dropdown">
            <li><a href="#" class="lang-item" data-lang="kor">Korean</a></li>
            <li><a href="#" class="lang-item" data-lang="eng">English</a></li>
          </ul>
        </div>
      </div>
    </header>

    <div class="banner-slider">
      <div class="slides">

        <div class="slide">
          <img src="banner/banner_warship3.jpg" alt="배너 1">
          <div class="banner-text">  Underwater Towed Cables & Connectors</div>
        </div>

        <div class="slide">
          <img src="banner/banner_submarine3.jpg" alt="배너 2">
          <div class="banner-text">Submarine cables and connectors</div>
        </div>

        <div class="slide">
          <img src="banner/banner_manufacturing3.jpg" alt="배너 3">
          <div class="banner-text">Underwater Cable Manufacturing Facility</div>
        </div>

        <div class="slide">
          <img src="banner/banner_waterpressuretester2.jpg" alt="배너 4">
          <div class="banner-text">Underwater Cable Test Facility</div>
        </div>

      </div>

      <button class="prev">&#10094;</button>
      <button class="next">&#10095;</button>

        <!-- 페이지네이션 (점 표시) -->
      <div class="swiper-pagination"></div>
    </div>


<section class="business-area">
  <h2>사업영역</h2>
  <div class="features">
    <div class="feature-card" style="background-image: url('icons/underwater-cable.png');">
      <h3>수중케이블</h3>
    </div>
    <div class="feature-card" style="background-image: url('icons/custom.png');">
      <h3>수중커넥터</h3>
    </div>
    <div class="feature-card" style="background-image: url('icons/custom.png');">
      <h3>커스텀케이블</h3>
    </div>
  </div>
</section>

  <footer>
    &copy; FINE DEFENSE INC. All Rights Reserved.
  </footer>

<script>
  const slides = document.querySelector('.slides');
  const slideItems = document.querySelectorAll('.slide');
  const prevBtn = document.querySelector('.prev');
  const nextBtn = document.querySelector('.next');
  const totalSlides = slideItems.length;

  // 복제 생성
  const firstClone = slideItems[0].cloneNode(true);
  const lastClone = slideItems[totalSlides - 1].cloneNode(true);
  slides.appendChild(firstClone);
  slides.insertBefore(lastClone, slideItems[0]);

  let index = 1;
  const slideWidth = 100;
  let isTransitioning = false;

  slides.style.transform = `translateX(-${index * slideWidth}%)`;

  function moveToSlide(i) {
    if (isTransitioning) return;
    isTransitioning = true;

    slides.style.transition = 'transform 0.6s ease-in-out';
    slides.style.transform = `translateX(-${i * slideWidth}%)`;
  }

  // 방향 버튼
  nextBtn.addEventListener('click', () => {
    index++;
    moveToSlide(index);
  });

  prevBtn.addEventListener('click', () => {
    index--;
    moveToSlide(index);
  });

  slides.addEventListener('transitionend', () => {
    if (index === totalSlides + 1) {
      requestAnimationFrame(() => {
        slides.style.transition = 'none';
        index = 1;
        slides.style.transform = `translateX(-${index * slideWidth}%)`;
        requestAnimationFrame(() => {
          slides.style.transition = 'transform 0.6s ease-in-out';
          isTransitioning = false;
        });
      });
    } else if (index === 0) {
      requestAnimationFrame(() => {
        slides.style.transition = 'none';
        index = totalSlides;
        slides.style.transform = `translateX(-${index * slideWidth}%)`;
        requestAnimationFrame(() => {
          slides.style.transition = 'transform 0.6s ease-in-out';
          isTransitioning = false;
        });
      });
    } else {
      isTransitioning = false;
    }
  });

  // ✅ 자동 슬라이드 (복귀 시 인덱스 강제 보정)
  setInterval(() => {
    index++;
    if (index > totalSlides + 1) index = 2;  // ❗️이 부분이 핵심
    moveToSlide(index);
  }, 5000);

  // ✅ 페이지 복귀 시 인덱스 리셋
  document.addEventListener("visibilitychange", () => {
    if (document.visibilityState === "visible") {
      // 페이지 돌아올 때 index가 범위 밖이면 안전하게 리셋
      if (index > totalSlides) index = 1;
      slides.style.transition = 'none';
      slides.style.transform = `translateX(-${index * slideWidth}%)`;
    }
  });
</script>

  </body>
</html>
