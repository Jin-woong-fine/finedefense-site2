<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>공지사항 | 화인디펜스</title>
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/sub-banner.css" />
  <style>
    .notice-section {
      max-width: 1000px;
      margin: 40px auto 100px;
      padding: 20px 40px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    table.notice-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 30px;
    }
    table.notice-table th, table.notice-table td {
      padding: 14px;
      border-bottom: 1px solid #ddd;
      text-align: left;
    }
    table.notice-table th {
      background: #0f2679;
      color: #fff;
    }
    table.notice-table tr:hover td {
      background: #f3f6ff;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="header"></div>

  <section class="sub-banner">
    <img src="/img/sub-banners/pr-1_v2.jpg" alt="공지사항 배너" />
    <div class="banner-text">
      <h1>홍보센터</h1>
      <p>화인디펜스의 주요 공지 및 안내사항을 확인하세요.</p>
    </div>
  </section>

  <!-- ✅ 3. breadcrumb -->
  <div class="breadcrumb">
    <a href="/">홈</a> &gt;
    <span class="crumb crumb-level1">홍보센터</span> &gt;
    <span class="crumb crumb-level2">공지사항</span>

    <!-- ✅ breadcrumb 내부에 탭 1개만 -->
    <div id="side-tabs" class="side-tabs"></div>
  </div>



  <section class="notice-section">
    <h1>공지사항</h1>
    <table class="notice-table" id="noticeTable">
      <thead>
        <tr><th>번호</th><th>제목</th><th>작성일</th></tr>
      </thead>
      <tbody><tr><td colspan="3">불러오는 중...</td></tr></tbody>
    </table>
  </section>

  <div id="footer"></div>

  <script src="/js/nav.js"></script>
  <script>
    const API_URL = "http://localhost:3000";
    async function loadNotices(){
      const res = await fetch(`${API_URL}/api/posts/notice?lang=kr`);
      const data = await res.json();
      const tbody = document.querySelector("#noticeTable tbody");
      if (!data.length) {
        tbody.innerHTML = "<tr><td colspan='3' style='text-align:center;color:#777;'>등록된 공지사항이 없습니다.</td></tr>";
        return;
      }
      tbody.innerHTML = data.map((n,i)=>`
        <tr onclick="location.href='/kr/sub/pr/newsroom/post_template.html?id=${n.id}'">
          <td>${data.length - i}</td>
          <td>${n.title}</td>
          <td>${new Date(n.created_at).toLocaleDateString()}</td>
        </tr>
      `).join("");
    }
    loadNotices();
  </script>
</body>
</html>
