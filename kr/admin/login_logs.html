<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>로그인 기록 | Fine Defense 관리자</title>

  <link rel="stylesheet" href="./css/admin.css">

  <style>
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      padding: 10px;
      border-bottom: 1px solid #ddd;
      font-size: 14px;
    }
    th {
      background:#eef1f7;
      font-weight:600;
    }

    .search-box {
      display:flex;
      gap:10px;
      margin-bottom:20px;
    }
    .input { padding:8px; border:1px solid #ccc; border-radius:6px; }
    .btn-search { padding:8px 12px; background:#0f2679; color:white; border:none; border-radius:6px; cursor:pointer; }


    .status-success { color: #0a7a2f; font-weight:600; }
    .status-fail { color: #c1121f; font-weight:600; }

    .role-admin {
      font-weight:700;
      color:#0f2679;
    }

    .foreign-login {
      background: #fff5f5;
    }

    .fail-reason {
      font-size:12px;
      color:#666;
    }

    .flag {
      font-family:
        "Apple Color Emoji",   /* macOS */
        "Segoe UI Emoji",      /* Windows */
        "Segoe UI Symbol",
        "Noto Color Emoji";    /* Linux */
      font-size: 16px;
      margin-right: 4px;
    }

    body {
      font-family: "Noto Sans KR", sans-serif;
    }

  </style>
</head>

<body>
  
<div id="sidebar"></div>

<div class="main">

  <div class="topbar">
    <h2>로그인 기록</h2>
    <div>
      <button class="btn btn-primary" onclick="location.href='../index.html'">홈으로</button>
      <button id="logoutBtn" class="btn btn-danger">로그아웃</button>
    </div>
  </div>

  <section class="panel">

    <div class="search-box">
      <input type="text" id="searchInput" class="input" placeholder="아이디 검색">
      <button class="btn-search" onclick="loadLoginLogs()">검색</button>
    </div>

    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>아이디</th>
          <th>권한</th>
          <th>IP</th>
          <th>국가</th>
          <th>브라우저</th>
          <th>결과</th>
          <th>실패사유</th>
          <th>시간</th>
        </tr>
      </thead>
      <tbody id="logTable"></tbody>
    </table>

  </section>

</div>

<script src="/kr/admin/js/common_auth.js"></script>
<script src="/kr/admin/js/sidebar.js"></script>
<script src="/kr/admin/js/login_logs.js"></script>

<script>
  requireAdminOrSuperadmin();
  loadSidebar("logs");
  document.getElementById("logoutBtn").onclick = logout;
</script>
</body>
</html>
