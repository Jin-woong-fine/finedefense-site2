<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ | Fine Defense</title>

  <!-- Quill -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- ê³µí†µ ê´€ë¦¬ì CSS (ìƒëŒ€ê²½ë¡œ) -->
  <!-- dashboard.html ê¸°ì¤€: ./css/admin.css -->
  <link rel="stylesheet" href="./css/admin.css">
</head>

<body>

  <!-- ğŸ”µ ì‚¬ì´ë“œë°” -->
  <div id="sidebar"></div>

  <!-- ğŸ”µ ë©”ì¸ -->
  <div class="main">

    <div class="topbar">
      <div class="title">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</div>
      <div>
        <!-- kr/admin/dashboard.html â†’ kr/index.html ë¡œ ê°€ì•¼ í•˜ë‹ˆê¹Œ ../ -->
        <button class="home-btn" onclick="location.href='../index.html'">í™ˆìœ¼ë¡œ</button>
        <button id="logoutBtn">ë¡œê·¸ì•„ì›ƒ</button>
      </div>
    </div>

    <section class="stats-container">
      <div class="stat-card">
        <h3>ì´ë²ˆë‹¬ ì¡°íšŒìˆ˜</h3>
        <p id="thisMonthViews" class="stat-value">0</p>
      </div>
      <div class="stat-card">
        <h3>ì§€ë‚œë‹¬ ì¡°íšŒìˆ˜</h3>
        <p id="lastMonthViews" class="stat-value">0</p>
      </div>
      <div class="stat-card">
        <h3>ì¦ê°€ìœ¨</h3>
        <p id="growthRate" class="stat-value">0%</p>
      </div>
      <div class="stat-card">
        <h3>ì „ì²´ ê²Œì‹œë¬¼ ìˆ˜</h3>
        <p id="totalPosts" class="stat-value">0</p>
      </div>
    </section>

    <section class="panel">
      <h2>ì›”ë³„ ì¡°íšŒìˆ˜ ê·¸ë˜í”„</h2>
      <canvas id="monthlyChart" style="max-height:350px;"></canvas>
    </section>

    <section class="panel">
      <h2>ì¡°íšŒìˆ˜ TOP 5 ê²Œì‹œë¬¼</h2>
      <ul id="topPostsList"></ul>
    </section>

  </div>

  <!-- ğŸ”¥ ES Module ë°©ì‹ -->
  <script type="module">
    // ğŸ‘‰ dashboard.html ê¸°ì¤€ ìƒëŒ€ê²½ë¡œ
    import { requireAdmin, logout } from "./js/common_auth.js";
    import { loadSidebar } from "./js/sidebar.js";
    import "./js/dashboard_core.js"; // ì‹¤í–‰ìš©

    requireAdmin();
    loadSidebar("dashboard");

    document.getElementById("logoutBtn").addEventListener("click", logout);
  </script>

</body>
</html>
