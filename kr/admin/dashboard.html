<!-- /kr/admin/dashboard.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>관리자 대시보드 | Fine Defense</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- 공통 관리자 CSS -->
  <link rel="stylesheet" href="./css/admin.css">

  <!-- 인증 -->
  <script src="./js/common_auth.js"></script>

  <!-- 세션 매니저 -->
  <script type="module" src="/js/session_manager.js"></script>
  <script type="module" src="./js/dashboard_session_timer.js"></script>
</head>

<body data-admin-page="dashboard">

<script>
  requireAnyUser();
</script>

<!-- =========================================================
     ADMIN LAYOUT
========================================================= -->
<div class="admin-wrapper">

  <!-- SIDEBAR -->
  <aside id="sidebar" class="admin-sidebar"></aside>

  <!-- CONTENT -->
  <div class="admin-content">
    <div class="main">

      <!-- =====================
           TOPBAR (공통)
      ====================== -->
      <div class="topbar">
        <div class="title">관리자 대시보드</div>

        <div class="topbar-right">
          <span id="session-timer" class="session-timer">세션 계산중...</span>

          <button
            id="topbarUser"
            class="topbar-user"
            type="button"
            aria-haspopup="true"
            aria-expanded="false"
          >
            <span id="topbarUserName">관리자</span> ▾
          </button>

          <div id="userDropdown" class="user-dropdown">
            <button
              class="dropdown-item"
              data-action="logout"
              type="button"
            >
              로그아웃
            </button>
          </div>

          <button
            type="button"
            onclick="location.href='../index.html'"
          >
            홈으로
          </button>
        </div>
      </div>

      <!-- =====================
           PAGE CONTENT
      ====================== -->
      <div class="page-content">

        <!-- 🔷 KPI -->
        <section class="stats-row">
          <div class="stat-card">
            <h3>오늘 방문자</h3>
            <p id="visitToday" class="stat-value">0</p>
          </div>
          <div class="stat-card">
            <h3>이번달 방문자</h3>
            <p id="visitThisMonth" class="stat-value">0</p>
          </div>
          <div class="stat-card">
            <h3>증가율</h3>
            <p id="visitGrowth" class="stat-value">0%</p>
          </div>
          <div class="stat-card">
            <h3>전체 게시물 수</h3>
            <p id="totalPosts" class="stat-value">0</p>
          </div>
        </section>

        <!-- 🔷 트래픽 -->
        <section class="grid-2">
          <div class="panel">
            <h2>최근 30일 방문자</h2>
            <canvas id="dailyChart"></canvas>
          </div>
          <div class="panel">
            <h2>디바이스 비율</h2>
            <canvas id="deviceChart"></canvas>
          </div>
        </section>

        <!-- 🔷 국가 / 유입 -->
        <section class="grid-2">
          <div class="panel">
            <h2>국가별 방문자</h2>
            <canvas id="countryChart"></canvas>
          </div>
          <div class="panel">
            <h2>유입경로 TOP 5</h2>
            <ul id="referrerList"></ul>
          </div>
        </section>

        <!-- 🔷 콘텐츠 성과 -->
        <section class="grid-2">
          <div class="panel">
            <h2>조회수 TOP 5 게시물</h2>
            <ul id="topPostsList"></ul>
          </div>
          <div class="panel">
            <h2>페이지뷰 TOP 5</h2>
            <ul id="pageViewList"></ul>
          </div>
        </section>

        <!-- 🔷 다운로드 / 제품 -->
        <section class="grid-2">
          <div class="panel">
            <h2>자료실 다운로드 TOP 5</h2>
            <ul id="downloadTopList"></ul>
          </div>
          <div class="panel">
            <h2>최근 등록 제품</h2>
            <div id="recentProducts"></div>
          </div>
        </section>

        <!-- 🔷 카탈로그 -->
        <section class="grid-2">
          <div class="panel">
            <h2>카탈로그 조회수 TOP 5</h2>
            <ul id="catalogViewTopList"></ul>
          </div>
          <div class="panel">
            <h2>카탈로그 다운로드 TOP 5</h2>
            <ul id="catalogDownloadTopList"></ul>
          </div>
        </section>

      </div>
      <!-- /page-content -->

    </div>
  </div>
</div>

<!-- =====================
     SCRIPTS
====================== -->
<script src="./js/sidebar.js"></script>
<script src="./js/topbar.js"></script>
<script src="./js/dashboard_core.js"></script>

</body>
</html>
