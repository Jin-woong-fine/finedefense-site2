<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>관리자 대시보드 | Fine Defense</title>

  <!-- Quill -->
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- 공통 관리자 CSS -->
  <link rel="stylesheet" href="./css/admin.css">
</head>

<body>

  <!-- 🔵 사이드바 -->
  <div id="sidebar"></div>

  <!-- 🔵 메인 -->
  <div class="main">

    <div class="topbar">
      <div class="title">관리자 대시보드</div>
      <div>
        <button class="home-btn" onclick="location.href='../index.html'">홈으로</button>
        <button id="logoutBtn">로그아웃</button>
      </div>
    </div>

    <section class="stats-container">
      <div class="stat-card">
        <h3>이번달 조회수</h3>
        <p id="thisMonthViews" class="stat-value">0</p>
      </div>
      <div class="stat-card">
        <h3>지난달 조회수</h3>
        <p id="lastMonthViews" class="stat-value">0</p>
      </div>
      <div class="stat-card">
        <h3>증가율</h3>
        <p id="growthRate" class="stat-value">0%</p>
      </div>
      <div class="stat-card">
        <h3>전체 게시물 수</h3>
        <p id="totalPosts" class="stat-value">0</p>
      </div>
    </section>

    <section class="panel">
      <h2>월별 조회수 그래프</h2>
      <canvas id="monthlyChart" style="max-height:350px;"></canvas>
    </section>

    <section class="panel">
      <h2>조회수 TOP 5 게시물</h2>
      <ul id="topPostsList"></ul>
    </section>

  </div>

  <!-- 🔥 공통 스크립트 -->
  <script src="./js/common_auth.js"></script>
  <script src="./js/sidebar.js"></script>
  <script src="./js/dashboard_core.js"></script>

  <script>
    // 🔥 🔥 🔥 관리자만 접근 허용
    requireAdmin();      

    // 🔵 관리자용 사이드바 로드
    loadSidebar("dashboard");

    // 🔵 로그아웃 버튼 이벤트
    document.getElementById("logoutBtn").addEventListener("click", logout);
  </script>

</body>
</html>
