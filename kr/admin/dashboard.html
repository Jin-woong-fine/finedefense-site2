<!-- /kr/admin/dashboard.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ | Fine Defense</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- ê³µí†µ ê´€ë¦¬ì CSS -->
  <link rel="stylesheet" href="./css/admin.css">

  <!-- ì¸ì¦ -->
  <script src="./js/common_auth.js"></script>

  <!-- ì„¸ì…˜ ë§¤ë‹ˆì € -->
  <script type="module" src="/js/session_manager.js"></script>
  <script type="module" src="./js/dashboard_session_timer.js"></script>

  <style>
    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 22px;
    }

    .stats-row {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 18px;
      margin-bottom: 30px;
    }
  </style>
</head>

<!-- â­ í˜ì´ì§€ ì‹ë³„ì (ì‚¬ì´ë“œë°” active í‘œì‹œìš©) -->
<body data-admin-page="dashboard">

<script> requireAnyUser(); </script>

<!-- â­ ì‚¬ì´ë“œë°” -->
<div id="sidebar"></div>

<!-- ë©”ì¸ ì½˜í…ì¸  -->
<div class="main">

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="title">ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</div>

    <div style="display:flex; align-items:center; gap:12px;">
      <span id="session-timer" class="session-timer">ì„¸ì…˜ ê³„ì‚°ì¤‘...</span>

      <div class="topbar-user" id="topbarUser">
        <span id="topbarUserName">ê´€ë¦¬ì</span> â–¾
        <div class="user-dropdown" id="userDropdown"></div>
      </div>

      <button onclick="location.href='../index.html'">í™ˆìœ¼ë¡œ</button>
    </div>
  </div>

  <!-- ğŸ”· 1) KPI ì¹´ë“œ -->
  <section class="stats-row">
    <div class="stat-card"><h3>ì˜¤ëŠ˜ ë°©ë¬¸ì</h3><p id="visitToday" class="stat-value">0</p></div>
    <div class="stat-card"><h3>ì´ë²ˆë‹¬ ë°©ë¬¸ì</h3><p id="visitThisMonth" class="stat-value">0</p></div>
    <div class="stat-card"><h3>ì¦ê°€ìœ¨</h3><p id="visitGrowth" class="stat-value">0%</p></div>
    <div class="stat-card"><h3>ì „ì²´ ê²Œì‹œë¬¼ ìˆ˜</h3><p id="totalPosts" class="stat-value">0</p></div>
  </section>

  <!-- ğŸ”· 2) íŠ¸ë˜í”½ íŒ¨ë„ -->
  <section class="grid-2">
    <div class="panel">
      <h2>ìµœê·¼ 30ì¼ ë°©ë¬¸ì</h2>
      <canvas id="dailyChart"></canvas>
    </div>

    <div class="panel">
      <h2>ë””ë°”ì´ìŠ¤ ë¹„ìœ¨</h2>
      <canvas id="deviceChart"></canvas>
    </div>
  </section>

  <!-- ğŸ”· 3) êµ­ê°€/ìœ ì… ê²½ë¡œ -->
  <section class="grid-2">
    <div class="panel">
      <h2>êµ­ê°€ë³„ ë°©ë¬¸ì</h2>
      <canvas id="countryChart"></canvas>
    </div>

    <div class="panel">
      <h2>ìœ ì…ê²½ë¡œ TOP 5</h2>
      <ul id="referrerList"></ul>
    </div>
  </section>

  <!-- ğŸ”· 4) ì½˜í…ì¸  ì„±ê³¼ -->
  <section class="grid-2">
    <div class="panel">
      <h2>ì¡°íšŒìˆ˜ TOP 5 ê²Œì‹œë¬¼</h2>
      <ul id="topPostsList"></ul>
    </div>

    <div class="panel">
      <h2>í˜ì´ì§€ë·° TOP 5</h2>
      <ul id="pageViewList"></ul>
    </div>
  </section>

  <!-- ğŸ”· 5) ë‹¤ìš´ë¡œë“œ / ì œí’ˆ -->
  <section class="grid-2">
    <div class="panel">
      <h2>ìë£Œì‹¤ ë‹¤ìš´ë¡œë“œ TOP 5</h2>
      <ul id="downloadTopList"></ul>
    </div>

    <div class="panel">
      <h2>ìµœê·¼ ë“±ë¡ ì œí’ˆ</h2>
      <div id="recentProducts"></div>
    </div>
  </section>

  <!-- ğŸ”· 6) ì¹´íƒˆë¡œê·¸ ë¶„ì„ -->
  <section class="grid-2">
    <div class="panel">
      <h2>ì¹´íƒˆë¡œê·¸ ì¡°íšŒìˆ˜ TOP 5</h2>
      <ul id="catalogViewTopList"></ul>
    </div>

    <div class="panel">
      <h2>ì¹´íƒˆë¡œê·¸ ë‹¤ìš´ë¡œë“œ TOP 5</h2>
      <ul id="catalogDownloadTopList"></ul>
    </div>
  </section>




</div>

<!-- ì‚¬ì´ë“œë°” ìë™ ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸ -->
<script src="./js/sidebar.js"></script>

<!-- ëŒ€ì‹œë³´ë“œ ë°ì´í„° ìŠ¤í¬ë¦½íŠ¸ -->
<script src="./js/dashboard_core.js"></script>

</body>
</html>
